# CVRPTW Models

# Содержание файлов
- ***main.py*** - в файле передаются параметры в выбранный метод.
- ***twMethods.py*** - файл содержит главные класс VRP и подкласс CVRPTW, содержащий вызов алгоритмов SA, 2Opt, 3Opt и реализацию алгоритма, который использует инструментарий коммерческого решателя Gurobi. 
- ***generate_tw_data.py*** - файл генерирует данные. Необходимо указать количество городов, начало и конец работы депо.
- ***vrptw-logistic.c*** - файл содержит реализации алгоритмов SA, 2Opt, 3Opt.
- ***logistic.h*** - файл содержит реализации методов для вычисления евклидового расстояния и настоящего расстояния с использованием OSRM между городами.
- ***distanceMatrix.h*** - файл создает матрицу времен, а также содержит методы для печати ее в консоль.
- ***vrp-main.c*** - файл является оберткой для реализаций алгоритмов на языке **C** для обращения к ним из **Python**.

# Запуск решения

- Установить исходные файлы с решениями 
- Для запуска алгоритмов в командной строке Linux вызвать команду: ***make***
- После сборки проекта предлагается прочтение документации, а затем выбор алогритма, который будет решать выбранную задачу

# Генерация данных
Данные генерируются с помощью команды: ***python3 generate_tw_data.py***. Далее предлагается выбрать количество городов и временное окно депо.

# Дополнительное пояснение
Данные хранятся в папках: 
  - ***20***, 
  - ***50***, 
  - ***100***;  
В папкаx  
  - ***20_tw***, 
  - ***50_tw***, 
  - ***100_tw***;  
хранятся созданные бинарные файлы, содержащие матрицы времен (времена, которые требуются для переезда между городами, включая депо).

# Текущие результаты

В данной таблице в качестве cost представлено ***среднее время в секундах*** по 100 примерам для 20, 50, 100 точек. 
Время, которое было выделено на 1 задачу в зависимости от количества точек в наборе данных:
  - 20 точек: ***300 секунд***
  - 50 точек: ***1000 секунд***
  - 100 точек: -- (пока что не удалость получить решение от Gurobi)

Данное время ***включает в себя время ождидания*** открытия временного окна конкретного клиента.
|   Algorithms | 20 points   | 20 points         | 50 points          | 50 points         | 100 points         | 100 points        |
|-------------:|:-------------|:-------------------|:--------------------|:-------------------|:-------------------|:------------------|
|           | cost(seconds)          | work time(seconds)      | cost(seconds)          | work time(seconds)     | cost(seconds)         | work time(seconds)     |
SA           | 160512.29002757    | 1.3680500100000004  | 467567.16829281    | 12.47990278        | 945868.6246770002 | 35.89136872277228  |
| 2Opt         | 159792.40108671002 | 0.07138965000000001 | 470478.80037874996 | 1.6726440299999998 | 955586.2258802901 | 29.349319339999997 |
| 3Opt         | 151522.32182567    | 0.6683240100000001  | 440119.84485035995 | 20.93652691        | 901714.53447594   | 246.26659057       |
| Gurobi       | 155649.84787834936 | 287.8291139602661   | _--_               | _--_               | _--_              | _--_               |

В данной таблице в качестве cost представлено ***расстояние в метрах*** по 100 примерам для 20, 50, 100 точек. При вычислении общего расстояния всего маршрута ***не учитывалось время ожидания*** открытия временного окна конкретного клиента.
